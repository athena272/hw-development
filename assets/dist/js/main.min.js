document.addEventListener("DOMContentLoaded",function(){console.log("[DEBUG] DOM content fully loaded.");if(document.getElementById("vsl-video-section")){console.log("[DEBUG] VSL page detected. Initializing VSL script.");const t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";const o=document.getElementsByTagName("script")[0];let n;o.parentNode.insertBefore(t,o);let l=!1;function e(e){if(console.log(`[DEBUG] Player state changed. New state: ${e.data}`),e.data==YT.PlayerState.PLAYING&&!l){console.log("[DEBUG] Video is playing. Starting to check time...");const e=setInterval(()=>{const t=n.getCurrentTime();console.log(`[DEBUG] Checking time: ${Math.round(t)}s`),t>1214&&(console.log("%c[DEBUG] TRIGGER! Time threshold reached!","color: lightgreen; font-weight: bold;"),function(){console.log("[DEBUG] Executing showHiddenContent function.");const e=document.getElementById("vsl-hidden-content");if(e){e.style.display="block",console.log("[DEBUG] Hidden content is now visible.");const t=1200,o=document.querySelector("#countdown-timer");o&&(console.log("[DEBUG] Starting countdown timer."),function(e,t){let o,n,l=e;const a=setInterval(function(){o=parseInt(l/60,10),n=parseInt(l%60,10),o=o<10?"0"+o:o,n=n<10?"0"+n:n,t.textContent=o+":"+n,--l<0&&(l=0,t.textContent="00:00",clearInterval(a))},1e3)}(t,o))}}(),clearInterval(e),l=!0)},1e3)}}window.onYouTubeIframeAPIReady=function(){console.log("[DEBUG] YouTube IFrame API is ready.");try{n=new YT.Player("youtube-player",{events:{onStateChange:e}}),console.log("[DEBUG] YouTube Player object created successfully:",n)}catch(e){console.error('[DEBUG] Failed to create YouTube Player. Is the iframe with id="youtube-player" present?',e)}};const a=document.getElementById("purchaseModal");if(a){console.log("[DEBUG] Purchase modal logic initialized."),a.addEventListener("show.bs.modal",function(e){const t=e.relatedTarget.getAttribute("data-name");console.log(`[DEBUG] Modal opened for product: ${t}`)});document.getElementById("finalize-purchase-btn").addEventListener("click",function(){const e=document.getElementById("customer-name").value,t=document.getElementById("customer-email").value,o=a.querySelector("#modal-product-name").getAttribute("data-qty-temp"),n=a.querySelector("#modal-product-name").getAttribute("data-total-temp");if(""===e.trim()||""===t.trim())return void alert("Please fill in your name and email.");console.log("[DEBUG] Finalizing purchase. Redirecting to thank-you.html...");const l=`thank-you.html?name=${encodeURIComponent(e)}&email=${encodeURIComponent(t)}&qty=${o}&total=${n}`;window.location.href=l}),a.addEventListener("show.bs.modal",function(e){const t=e.relatedTarget,o=t.getAttribute("data-qty"),n=t.getAttribute("data-total"),l=t.getAttribute("data-name"),c=a.querySelector("#modal-product-name");c.textContent=l,c.setAttribute("data-qty-temp",o),c.setAttribute("data-total-temp",n)})}}if(document.getElementById("thankyou-title-section")){const c=new URLSearchParams(window.location.search),i=c.get("name"),r=c.get("email"),d=c.get("qty"),s=c.get("total"),m=document.getElementById("customer-name-placeholder"),u=document.getElementById("customer-email-placeholder"),g=document.getElementById("product-image-placeholder"),p=document.getElementById("product-qty-placeholder"),y=document.getElementById("product-total-placeholder"),h=document.getElementById("bonus-content-placeholder");i&&(m.textContent=i),r&&(u.textContent=r),d&&(p.textContent=d),s&&(y.textContent=s);const b={2:{image:"bonus3.webp",title:"Skin-Firming Blueprint",productImg:"img-2-bottles.webp"},3:{image:"bonus2.webp",title:"Cravings Crusher",productImg:"img-3-bottles.webp"},6:{image:"bonus1.webp",title:"Firm & Fit",productImg:"img-6-bottles.webp"}}[d];b&&(g.src=`./assets/images/${b.productImg}`,h.innerHTML=`\n                <p>For your purchase of <strong>${d} bottles</strong>, youâ€™ll receive the ebook <strong>'${b.title}'</strong>, ENJOY!</p>\n                <img src="./assets/images/${b.image}" alt="${b.title}" class="img-fluid" style="max-width: 250px;">\n            `)}});